# üóÑÔ∏è –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –ß–∞—Å—Ç—å 2

[![GitHub](https://img.shields.io/badge/GitHub-Repository-blue?logo=github)](https://github.com/kellisfen/12-07.md)
[![Database](https://img.shields.io/badge/Database-Scaling-orange.svg)](README.md)
[![Architecture](https://img.shields.io/badge/Architecture-Sharding-red.svg)](architecture_diagram.pdf)

> **–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é ¬´–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ. –ß–∞—Å—Ç—å 2¬ª**
>
> –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –≤–∫–ª—é—á–∞—é—â–µ–µ –∞–Ω–∞–ª–∏–∑ master-slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —à–∞—Ä–¥–∏–Ω–≥–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ –∫–Ω–∏–≥.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üéØ –û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [üìä –ó–∞–¥–∞–Ω–∏–µ 1: –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è](#-–∑–∞–¥–∞–Ω–∏–µ-1-–∞–Ω–∞–ª–∏–∑-–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)
  - [Master-Slave –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#master-slave-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
  - [Master —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ Slave —Å–µ—Ä–≤–µ—Ä–∞–º–∏](#master-—Å-–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏-slave-—Å–µ—Ä–≤–µ—Ä–∞–º–∏)
- [üèóÔ∏è –ó–∞–¥–∞–Ω–∏–µ 2: –ü–ª–∞–Ω —à–∞—Ä–¥–∏–Ω–≥–∞](#Ô∏è-–∑–∞–¥–∞–Ω–∏–µ-2-–ø–ª–∞–Ω-—à–∞—Ä–¥–∏–Ω–≥–∞)
  - [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
  - [–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥](#–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π-—à–∞—Ä–¥–∏–Ω–≥)
  - [–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥](#–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π-—à–∞—Ä–¥–∏–Ω–≥)
  - [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
- [üìà –î–∏–∞–≥—Ä–∞–º–º—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è](#-–¥–∏–∞–≥—Ä–∞–º–º—ã-–∏-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ –∫–Ω–∏–≥. –†–∞–±–æ—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç:

- **–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π master-slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
- **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —à–∞—Ä–¥–∏–Ω–≥–∞
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã** –∏ —Å—Ö–µ–º—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL/MySQL (–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Master-Slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è + –®–∞—Ä–¥–∏–Ω–≥
- **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞**: Load Balancer + Sharding Router
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìä –ó–∞–¥–∞–Ω–∏–µ 1: –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### Master-Slave –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### üîÑ –ê–∫—Ç–∏–≤–Ω—ã–π master-—Å–µ—Ä–≤–µ—Ä –∏ –ø–∞—Å—Å–∏–≤–Ω—ã–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π slave-—Å–µ—Ä–≤–µ—Ä

<details>
<summary><strong>üìà –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</strong></summary>

#### 1. üõ°Ô∏è **–í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (High Availability)**
- ‚úÖ –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Å—Ç—Ä–æ—è master-—Å–µ—Ä–≤–µ—Ä–∞, slave –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –≤ –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
- ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Å—Ç–æ—è —Å–∏—Å—Ç–µ–º—ã
- üìä **SLA**: –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 99.9% –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

#### 2. üíæ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- üîÑ **RPO**: Recovery Point Objective < 1 –º–∏–Ω—É—Ç–∞

#### 3. ‚ö° **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ**
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —á—Ç–µ–Ω–∏–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ slave-—Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ master-—Å–µ—Ä–≤–µ—Ä
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
- üìà **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ 50-70%

#### 4. üåç **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è slave-—Å–µ—Ä–≤–µ—Ä–∞ –≤ –¥—Ä—É–≥–æ–º —Ä–µ–≥–∏–æ–Ω–µ
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ä–∞–∑–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏—è—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–±–æ–µ–≤
- üåê **Latency**: –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –¥–æ 30-50%

</details>

### Master —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ Slave —Å–µ—Ä–≤–µ—Ä–∞–º–∏

#### üîó Master-—Å–µ—Ä–≤–µ—Ä –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ slave-—Å–µ—Ä–≤–µ—Ä–æ–≤

<details>
<summary><strong>üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</strong></summary>

#### 1. üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è**
- ‚úÖ –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è
- ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ read-–∑–∞–ø—Ä–æ—Å–æ–≤ –º–µ–∂–¥—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º slave-—Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –õ–∏–Ω–µ–π–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á—Ç–µ–Ω–∏—è
- üìä **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: N slave-—Å–µ—Ä–≤–µ—Ä–æ–≤ = N√ó100% —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á—Ç–µ–Ω–∏—è

#### 2. üõ°Ô∏è **–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Å—Ç—Ä–æ—è –æ–¥–Ω–æ–≥–æ slave-—Å–µ—Ä–≤–µ—Ä–∞, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç—É
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –¥–ª—è –ø—Ä–æ–º–æ—É—à–µ–Ω–∞ –≤ master
- üîÑ **Availability**: 99.99% –ø—Ä–∏ 3+ slave-—Å–µ—Ä–≤–µ—Ä–∞—Ö

#### 3. ‚öôÔ∏è **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤**
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–Ω—ã—Ö slave-—Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ–¥–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö, –±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥—Ä—É–≥–∏—Ö
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏
- üéØ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### 4. ‚öñÔ∏è **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏**
- ‚úÖ –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ read-–∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ (round-robin, least connections)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- üîÑ **–ê–ª–≥–æ—Ä–∏—Ç–º—ã**: Round-robin, Weighted, Health-check based

#### 5. üîß **–ì–∏–±–∫–æ—Å—Ç—å –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏**
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–≤–æ–¥–∏—Ç—å —Å–µ—Ä–≤–µ—Ä—ã –∏–∑ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ü–æ–æ—á–µ—Ä–µ–¥–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ slave-—Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- üõ†Ô∏è **Zero-downtime**: –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã

</details>

## üèóÔ∏è –ó–∞–¥–∞–Ω–∏–µ 2: –ü–ª–∞–Ω —à–∞—Ä–¥–∏–Ω–≥–∞

> **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —à–∞—Ä–¥–∏–Ω–≥–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ –∫–Ω–∏–≥**

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### üìä –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

<details>
<summary><strong>üë• –¢–∞–±–ª–∏—Ü–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" (users)</strong></summary>

```sql
CREATE TABLE users (
    user_id         BIGINT PRIMARY KEY,
    username        VARCHAR(50) UNIQUE NOT NULL,
    email           VARCHAR(100) UNIQUE NOT NULL,
    password_hash   VARCHAR(255) NOT NULL,
    registration_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    region          VARCHAR(50) NOT NULL,
    status          ENUM('active', 'inactive', 'banned') DEFAULT 'active'
);
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_users_region` –Ω–∞ `region`
- `idx_users_email` –Ω–∞ `email`
- `idx_users_registration_date` –Ω–∞ `registration_date`

</details>

<details>
<summary><strong>üìö –¢–∞–±–ª–∏—Ü–∞ "–ö–Ω–∏–≥–∏" (books)</strong></summary>

```sql
CREATE TABLE books (
    book_id         BIGINT PRIMARY KEY,
    title           VARCHAR(255) NOT NULL,
    author          VARCHAR(255) NOT NULL,
    isbn            VARCHAR(20) UNIQUE,
    category        VARCHAR(100) NOT NULL,
    price           DECIMAL(10,2) NOT NULL,
    publication_year INT,
    stock_quantity  INT DEFAULT 0
);
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_books_category` –Ω–∞ `category`
- `idx_books_author` –Ω–∞ `author`
- `idx_books_price` –Ω–∞ `price`

</details>

<details>
<summary><strong>üè™ –¢–∞–±–ª–∏—Ü–∞ "–ú–∞–≥–∞–∑–∏–Ω—ã" (stores)</strong></summary>

```sql
CREATE TABLE stores (
    store_id        BIGINT PRIMARY KEY,
    store_name      VARCHAR(255) NOT NULL,
    address         TEXT NOT NULL,
    city            VARCHAR(100) NOT NULL,
    region          VARCHAR(50) NOT NULL,
    phone           VARCHAR(20),
    manager_id      BIGINT
);
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_stores_region` –Ω–∞ `region`
- `idx_stores_city` –Ω–∞ `city`

</details>

### üîß –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —à–∞—Ä–¥–∏–Ω–≥–∞

#### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥

#### üìã 1. –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥ (Vertical Sharding)

**üéØ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:**

<details>
<summary><strong>üóÑÔ∏è –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º</strong></summary>

#### üë• **–°–µ—Ä–≤–µ—Ä 1 (User Database)**: –¢–∞–±–ª–∏—Ü–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
```
üîπ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
üîπ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –û–ø–µ—Ä–∞—Ü–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏
üîπ –ù–∞–≥—Ä—É–∑–∫–∞: –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π
üîπ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
  ‚Ä¢ Read/Write ratio: 70/30
  ‚Ä¢ Peak load: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
  ‚Ä¢ Storage: ~100GB (1M –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```

#### üìö **–°–µ—Ä–≤–µ—Ä 2 (Catalog Database)**: –¢–∞–±–ª–∏—Ü–∞ "–ö–Ω–∏–≥–∏"
```
üîπ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
üîπ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
üîπ –ù–∞–≥—Ä—É–∑–∫–∞: –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ —á—Ç–µ–Ω–∏—è, —É–º–µ—Ä–µ–Ω–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø–∏—Å–∏
üîπ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
  ‚Ä¢ Read/Write ratio: 95/5
  ‚Ä¢ Peak load: –ü–æ–∏—Å–∫ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞
  ‚Ä¢ Storage: ~500GB (10M –∫–Ω–∏–≥)
```

#### üè™ **–°–µ—Ä–≤–µ—Ä 3 (Store Database)**: –¢–∞–±–ª–∏—Ü–∞ "–ú–∞–≥–∞–∑–∏–Ω—ã"
```
üîπ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ—á–∫–∞—Ö –ø—Ä–æ–¥–∞–∂
üîπ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
üîπ –ù–∞–≥—Ä—É–∑–∫–∞: –ù–∏–∑–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ —á—Ç–µ–Ω–∏—è
üîπ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
  ‚Ä¢ Read/Write ratio: 98/2
  ‚Ä¢ Peak load: –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤
  ‚Ä¢ Storage: ~10GB (1000 –º–∞–≥–∞–∑–∏–Ω–æ–≤)
```

</details>

#### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥

#### üîÑ 2. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥ (Horizontal Sharding)

**üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:**

<details>
<summary><strong>üë• –®–∞—Ä–¥–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü—ã "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"</strong></summary>

#### üîë **–ö–ª—é—á —à–∞—Ä–¥–∏–Ω–≥–∞**: `user_id % 4` –∏–ª–∏ –ø–æ —Ä–µ–≥–∏–æ–Ω—É

| –®–∞—Ä–¥ | –ö—Ä–∏—Ç–µ—Ä–∏–π | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ |
|------|----------|----------|-------------------|
| **–®–∞—Ä–¥ 1** | `user_id % 4 = 1` –∏–ª–∏ –ï–≤—Ä–æ–ø–∞ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å ID 1, 5, 9, 13... | 25% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **–®–∞—Ä–¥ 2** | `user_id % 4 = 2` –∏–ª–∏ –ê–∑–∏—è | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å ID 2, 6, 10, 14... | 25% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **–®–∞—Ä–¥ 3** | `user_id % 4 = 3` –∏–ª–∏ –ê–º–µ—Ä–∏–∫–∞ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å ID 3, 7, 11, 15... | 25% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **–®–∞—Ä–¥ 4** | `user_id % 4 = 0` –∏–ª–∏ –û—Å—Ç–∞–ª—å–Ω—ã–µ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å ID 4, 8, 12, 16... | 25% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —à–∞—Ä–¥–∏–Ω–≥–∞:**
- üåç –°–Ω–∏–∂–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìä –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

</details>

<details>
<summary><strong>üìö –®–∞—Ä–¥–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü—ã "–ö–Ω–∏–≥–∏"</strong></summary>

#### üîë **–ö–ª—é—á —à–∞—Ä–¥–∏–Ω–≥–∞**: `category` –∏–ª–∏ `book_id`

| –®–∞—Ä–¥ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ |
|------|-----------|----------|----------------|
| **–®–∞—Ä–¥ 1** | –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ | –†–æ–º–∞–Ω—ã, –ø–æ—ç–∑–∏—è, –¥—Ä–∞–º–∞ | –í—ã—Å–æ–∫–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å |
| **–®–∞—Ä–¥ 2** | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ | IT, –∏–Ω–∂–µ–Ω–µ—Ä–∏—è, –Ω–∞—É–∫–∞ | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã |
| **–®–∞—Ä–¥ 3** | –î–µ—Ç—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ | –°–∫–∞–∑–∫–∏, –æ–±—É—á–∞—é—â–∏–µ –∫–Ω–∏–≥–∏ | –°–µ–∑–æ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ |
| **–®–∞—Ä–¥ 4** | –ù–∞—É—á–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ | –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ –∏–∑–¥–∞–Ω–∏—è | –ù–∏–∑–∫–∞—è, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ |

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ `book_id`:**
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ö–µ—à—É ID
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ "–≥–æ—Ä—è—á–∏—Ö" —à–∞—Ä–¥–æ–≤

</details>

<details>
<summary><strong>üè™ –®–∞—Ä–¥–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü—ã "–ú–∞–≥–∞–∑–∏–Ω—ã"</strong></summary>

#### üîë **–ö–ª—é—á —à–∞—Ä–¥–∏–Ω–≥–∞**: `region`

| –®–∞—Ä–¥ | –†–µ–≥–∏–æ–Ω | –ü–æ–∫—Ä—ã—Ç–∏–µ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|------|--------|----------|-------------|
| **–®–∞—Ä–¥ 1** | –°–µ–≤–µ—Ä–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã | –ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, –ú—É—Ä–º–∞–Ω—Å–∫, –°—ã–∫—Ç—ã–≤–∫–∞—Ä | –ù–∏–∑–∫–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –º–∞–≥–∞–∑–∏–Ω–æ–≤ |
| **–®–∞—Ä–¥ 2** | –Æ–∂–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã | –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –†–æ—Å—Ç–æ–≤, –í–æ–ª–≥–æ–≥—Ä–∞–¥ | –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
| **–®–∞—Ä–¥ 3** | –í–æ—Å—Ç–æ—á–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã | –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –û–º—Å–∫ | –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ |
| **–®–∞—Ä–¥ 4** | –ó–∞–ø–∞–¥–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã | –ú–æ—Å–∫–≤–∞, –°–ü–±, –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ |

**–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏:**
- üîÑ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚öñÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

</details>

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

#### ‚öôÔ∏è –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–æ–≤

<details>
<summary><strong>üèóÔ∏è Master-Slave –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–¥–∞</strong></summary>

#### 1. üî¥ **Master —Å–µ—Ä–≤–µ—Ä—ã** (–∑–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ)
```
üîπ –§—É–Ω–∫—Ü–∏–∏:
  ‚Ä¢ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ (INSERT, UPDATE, DELETE)
  ‚Ä¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ —Å–æ slave-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
  ‚Ä¢ –û–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

üîπ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: Read-Write
üîπ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è/–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è
üîπ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: 24/7 health checks
```

#### 2. üîµ **Slave —Å–µ—Ä–≤–µ—Ä—ã** (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
```
üîπ –§—É–Ω–∫—Ü–∏–∏:
  ‚Ä¢ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —á—Ç–µ–Ω–∏–µ (SELECT)
  ‚Ä¢ –ü–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç master —á–µ—Ä–µ–∑ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é
  ‚Ä¢ –û–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —á—Ç–µ–Ω–∏—è

üîπ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: Read-Only
üîπ –ó–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏: < 100ms
üîπ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2-4 –Ω–∞ –∫–∞–∂–¥—ã–π master
```

#### 3. üü¢ **Proxy/Router —Å–µ—Ä–≤–µ—Ä**
```
üîπ –§—É–Ω–∫—Ü–∏–∏:
  ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫ –∫–∞–∫–æ–º—É —à–∞—Ä–¥—É –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å
  ‚Ä¢ –ë–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É slave-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
  ‚Ä¢ –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç failover –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
  ‚Ä¢ –ö–µ—à–∏—Ä—É–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ —à–∞—Ä–¥–∞—Ö

üîπ –ê–ª–≥–æ—Ä–∏—Ç–º—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:
  ‚Ä¢ Consistent Hashing
  ‚Ä¢ Range-based routing
  ‚Ä¢ Directory-based routing
```

</details>

#### üìä –ë–ª–æ–∫-—Å—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

<details>
<summary><strong>üèóÔ∏è –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã</strong></summary>

```mermaid
graph TB
    Client[üñ•Ô∏è –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è]
    LB[‚öñÔ∏è Load Balancer]
    Router[üîÄ Sharding Router/Proxy]

    subgraph "–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —à–∞—Ä–¥—ã"
        UserDB[üë• User Database<br/>Cluster]
        BookDB[üìö Books Database<br/>Cluster]
        StoreDB[üè™ Stores Database<br/>Cluster]
    end

    subgraph "User Shards"
        US1[üåç –ï–≤—Ä–æ–ø–∞<br/>–®–∞—Ä–¥ 1]
        US2[üåè –ê–∑–∏—è<br/>–®–∞—Ä–¥ 2]
        US3[üåé –ê–º–µ—Ä–∏–∫–∞<br/>–®–∞—Ä–¥ 3]
    end

    subgraph "Book Shards"
        BS1[üìñ –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è<br/>–®–∞—Ä–¥ 1]
        BS2[üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è<br/>–®–∞—Ä–¥ 2]
    end

    subgraph "Store Shards"
        SS1[‚¨ÜÔ∏è –°–µ–≤–µ—Ä<br/>–®–∞—Ä–¥ 1]
        SS2[‚¨áÔ∏è –Æ–≥<br/>–®–∞—Ä–¥ 2]
    end

    subgraph "Master-Slave"
        UM1[üî¥ UM1 Master<br/>R/W]
        USL1[üîµ US1A/B Slaves<br/>R-Only]
        BM1[üî¥ BM1 Master<br/>R/W]
        BSL1[üîµ BS1A/B Slaves<br/>R-Only]
    end

    subgraph "Monitoring"
        MON[üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥]
        CONF[‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è]
        BACKUP[üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ]
    end

    Client --> LB
    LB --> Router
    Router --> UserDB
    Router --> BookDB
    Router --> StoreDB

    UserDB --> US1
    UserDB --> US2
    UserDB --> US3

    BookDB --> BS1
    BookDB --> BS2

    StoreDB --> SS1
    StoreDB --> SS2

    US1 --> UM1
    UM1 --> USL1
    BS1 --> BM1
    BM1 --> BSL1

    MON -.-> UM1
    MON -.-> BM1
    CONF -.-> Router
    BACKUP -.-> USL1
    BACKUP -.-> BSL1
```

**üìã –õ–µ–≥–µ–Ω–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**

| –°–∏–º–≤–æ–ª | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã |
|--------|-----------|----------|--------------|
| üî¥ | Master —Å–µ—Ä–≤–µ—Ä—ã | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è | Read-Write |
| üîµ | Slave —Å–µ—Ä–≤–µ—Ä—ã | –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è | Read-Only |
| üü¢ | Routing Layer | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ | Proxy |
| üü† | Management | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | Monitoring |

**üîÑ –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã:**
- **–†–µ–ø–ª–∏–∫–∞—Ü–∏—è**: Master ‚Üí Slave (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è)
- **–®–∞—Ä–¥–∏–Ω–≥**: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π (–ø–æ —Ç–∞–±–ª–∏—Ü–∞–º) + –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π (–≤–Ω—É—Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü)
- **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞**: Round-robin, Health-check based
- **Failover**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö

</details>

## üìà –î–∏–∞–≥—Ä–∞–º–º—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

> **üìé –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**: [`architecture_diagram.pdf`](./architecture_diagram.pdf)

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- üèóÔ∏è –î–µ—Ç–∞–ª—å–Ω—É—é —Å—Ö–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
- üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üõ°Ô∏è –°—Ö–µ–º—ã –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
- üåê –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

### üèõÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

<details>
<summary><strong>üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã</strong></summary>

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —à–∞—Ä–¥–∏–Ω–≥–∞**:

#### 1. üìä **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** –ø–æ —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö
```
üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí User Database Cluster
üìö –ö–Ω–∏–≥–∏       ‚Üí Books Database Cluster
üè™ –ú–∞–≥–∞–∑–∏–Ω—ã    ‚Üí Stores Database Cluster
```

#### 2. üîÑ **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
```
User Shards:  [–ï–≤—Ä–æ–ø–∞] [–ê–∑–∏—è] [–ê–º–µ—Ä–∏–∫–∞] [–û—Å—Ç–∞–ª—å–Ω—ã–µ]
Book Shards:  [–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è] [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è] [–î–µ—Ç—Å–∫–∞—è] [–ù–∞—É—á–Ω–∞—è]
Store Shards: [–°–µ–≤–µ—Ä] [–Æ–≥] [–í–æ—Å—Ç–æ–∫] [–ó–∞–ø–∞–¥]
```

#### 3. üî¥üîµ **Master-Slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–¥–∞
```
Master (R/W) ‚Üí Slave A (R-Only)
             ‚Üí Slave B (R-Only)
             ‚Üí Slave C (R-Only)
```

#### 4. üîÄ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** —á–µ—Ä–µ–∑ Sharding Router
```
Client Request ‚Üí Load Balancer ‚Üí Sharding Router ‚Üí Appropriate Shard
```

</details>

<details>
<summary><strong>‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã</strong></summary>

#### üöÄ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- ‚úÖ –í—ã—Å–æ–∫–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–∞–∫ –ø–æ —á—Ç–µ–Ω–∏—é, —Ç–∞–∫ –∏ –ø–æ –∑–∞–ø–∏—Å–∏
- ‚úÖ –õ–∏–Ω–µ–π–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —à–∞—Ä–¥–æ–≤
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### üõ°Ô∏è **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
- ‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–¥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

#### üåê **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –≤ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤/–∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### ‚öôÔ∏è **–£–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

</details>

<details>
<summary><strong>üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏</strong></summary>

#### üéØ **–ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è**
- **Consistent Hashing**: –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Range-based Sharding**: –î–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Directory-based Routing**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

#### üîÑ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover**: –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ master-—Å–µ—Ä–≤–µ—Ä–æ–≤
- **Health Checks**: –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
- **Circuit Breaker**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤

#### üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- **Real-time Monitoring**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Auto-rebalancing**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- **Predictive Scaling**: –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –≤ —Ä–µ—Å—É—Ä—Å–∞—Ö

#### üíæ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**
- **Continuous Backup**: –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Point-in-time Recovery**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –ª—é–±—É—é —Ç–æ—á–∫—É –≤—Ä–µ–º–µ–Ω–∏
- **Cross-region Replication**: –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–µ–≥–∏–æ–Ω–∞–º–∏

</details>

---

<div align="center">

**ÔøΩ –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ**
*–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –ß–∞—Å—Ç—å 2*

</div>
